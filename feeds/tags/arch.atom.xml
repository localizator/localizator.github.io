<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>localizator@notes</title><link href="http://localizator.github.io/" rel="alternate"></link><link href="http://feeds.feedburner.com/feeds/tags/arch.atom.xml" rel="self"></link><id>http://localizator.github.io/</id><updated>2013-04-10T03:03:00+03:00</updated><entry><title>netctl вже в [core]</title><link href="http://localizator.github.io/2013-04-10/netctl-is-now-in-core/" rel="alternate"></link><updated>2013-04-10T03:03:00+03:00</updated><author><name>localizator</name></author><id>tag:localizator.github.io,2013-04-10:2013-04-10/netctl-is-now-in-core/</id><summary type="html">&lt;p&gt;Розробники ArchLinux &lt;a href="https://www.archlinux.org/news/netctl-is-now-in-core/"&gt;&lt;strong&gt;повідомили&lt;/strong&gt;&lt;/a&gt; про інтеграцію в репозиторій [core] проекту нової системи налаштування параметрів підключення до мережі - &lt;a href="https://wiki.archlinux.org/index.php/Netctl"&gt;&lt;strong&gt;netctl&lt;/strong&gt;&lt;/a&gt;, розробленої для заміни раніше використовуваної системи &lt;a href="https://wiki.archlinux.org/index.php/Netcfg"&gt;&lt;strong&gt;netcfg&lt;/strong&gt;&lt;/a&gt; і заснованої на залученні можливостей systemd. Підтримка старого конфігуратора netcfg поки залишена у складі дистрибутива, але буде видалена в найближчому майбутньому. Всім користувачам рекомендується перейти до використання netctl, слідуючи &lt;a href="https://wiki.archlinux.org/index.php/Netctl#Migrating_from_netcfg"&gt;&lt;strong&gt;покроковій інструкції&lt;/strong&gt;&lt;/a&gt; з міграції та попередньо ознайомившись із системними інструкціями по &lt;a href="https://github.com/joukewitteveen/netctl/blob/master/docs/netctl.1.txt"&gt;netctl&lt;/a&gt;,&lt;a href="https://github.com/joukewitteveen/netctl/blob/master/docs/netctl.profile.5.txt"&gt;netctl.profile&lt;/a&gt; і &lt;a href="https://github.com/joukewitteveen/netctl/blob/master/docs/netctl.special.7.txt"&gt;netctl.special&lt;/a&gt;.&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;В основі netctl закладена ідея використання профілів з ​​налаштуваннями (приклади профілів можна знайти в директорії /etc/netctl/examples/, де &lt;a href="https://github.com/joukewitteveen/netctl/tree/master/docs/examples"&gt;представлені&lt;/a&gt; готові файли для налаштування виділення адреси по dhcp, статичної IP, бездротового з'єднання з WEP/WPA, мережевого моста, PPPoE, PPP, бондинга, VLAN, різних тунелів і т.п.). Для наочного конфігурування безпроводових мереж передбачена спеціальна консольна утиліта wifi-menu, що здійснює налаштування у формі меню.&lt;/p&gt;
&lt;p&gt;Приклад профілю для налаштування статичного IP:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Description='A basic static ethernet connection'&lt;br /&gt;
Interface=eth0&lt;br /&gt;
Connection=ethernet&lt;br /&gt;
IP=static&lt;br /&gt;
Address=('192.168.1.23/24' '192.168.1.87/24')&lt;br /&gt;
#Routes=('192.168.0.0/24 via 192.168.1.2')&lt;br /&gt;
Gateway='192.168.1.1'&lt;br /&gt;
DNS=('192.168.1.1')&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Приклад профілю для налаштування PPPoE:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Description='Example PPPoE connection'&lt;br /&gt;
Interface=eth0&lt;br /&gt;
Connection=pppoe&lt;br /&gt;
User='example@yourprovider.com'&lt;br /&gt;
Password='very secret'&lt;br /&gt;
ConnectionMode='persist'  &lt;/p&gt;
&lt;/blockquote&gt;</summary><category term="arch"></category><category term="linux"></category><category term="systemd"></category><category term="netctl"></category></entry><entry><title>Встановлення Arch Linux з Systemd</title><link href="http://localizator.github.io/2013-02-26/install-arch-linux-systemd/" rel="alternate"></link><updated>2013-02-26T21:03:00+02:00</updated><author><name>localizator</name></author><id>tag:localizator.github.io,2013-02-26:2013-02-26/install-arch-linux-systemd/</id><summary type="html">&lt;p&gt;&lt;strong&gt;Інструкція актуальна на березень 2013.&lt;br /&gt;
ISO-образ який використовувався при написанні посту: archlinux-2013.03.01-dual.iso.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;13 жовтня 2012 в історії Arch Linux відбулася досить значна
подія - дистрибутив повністю перейшов на використання Systemd.
Декількома місяцями раніше з інсталяційного образу був видалений
інсталятор AIF. Таким чином, процес встановлення і
налаштування зазнав безліч змін, про які я постараюся
розповісти нижче. Ставити систему ми будемо повністю вручну, без
використання спеціальних скриптів '''pacstrap''',
&lt;strong&gt;&lt;em&gt;*genfstab&lt;/em&gt;&lt;/strong&gt;&lt;em&gt; і
&lt;strong&gt;&lt;em&gt;*arch-chroot&lt;/em&gt;&lt;/strong&gt;&lt;/em&gt;.
&lt;!-- more --&gt;
Відразу обмовлюся, що для установки знадобиться підключення до Інтернету.
Чим простіше воно буде - тим краще. Ідеальним варіантом буде підключення
через роутер в режимі route (т.е коли роутер сам підключається до
Інтернету і роздає його по локальній мережі).&lt;/p&gt;
&lt;p&gt;Спочатку намітимо план робіт. нам знадобиться:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="#prepare"&gt;Підготуватися до встановлення&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#boot"&gt;Завантажитися&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#net"&gt;Підняти мережу&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#hdd"&gt;Підготувати жорсткий диск&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pacman"&gt;Встановити базові пакети&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#chroot"&gt;Перейти в встановлювану систему&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#settings"&gt;Гарненько цю систему налаштувати&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#bootloader"&gt;Встановити завантажувач&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#settings-after-boot"&gt;Перезавантажитися і завершити налаштування&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#new-system"&gt;Вижити у встановленій системі&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="prepare"&gt;Підготовка до встановлення&lt;/h2&gt;
&lt;p&gt;Якщо хто не знає, дистрибутив лежить тут —
&lt;a href="http://www.archlinux.org/download/"&gt;http://www.archlinux.org/download/&lt;/a&gt;. Завантажуйте тільки реліз, не намагайтеся
користуватися нестабільними зрізами або будь-якими іншими збірками, якщо не готові
самостійно вирішувати найнесподіваніші проблеми.&lt;/p&gt;
&lt;p&gt;ISO-образ найкраще записати на CD, це майже гарантовано врятує від
косяків, які зустрічаються при спробі встановлення з флешок. Якщо
CD-приводу немає - копіюйте дистрибутив на флешку за допомогою команди dd:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dd if=archlinux-2013.03.01-dual.iso of=/dev/sdX
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;де X - літерне позначення девайса флешки, наприклад &lt;strong&gt;&lt;em&gt;*sdb&lt;/em&gt;&lt;/strong&gt;&lt;em&gt;.
Номер розділу вказувати не потрібно, тільки букву. Будьте уважні!
Помилитеся буквою - можете затерти дані на вінчестері! В цілях
обережності &lt;strong&gt;&lt;em&gt;*dd&lt;/em&gt;&lt;/strong&gt;&lt;/em&gt; варто виконувати від користувача, а не від
рута, якщо це дозволяють настройки вашої системи.&lt;/p&gt;
&lt;h2 id="boot"&gt;Завантаження&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Boot menu" src="/static/images/boot.png" /&gt;  &lt;/p&gt;
&lt;p&gt;Тут все елементарно - вставляєте флешку, вибираєте архітектуру
і завантажуєтесь (для 32-бітових процесорів в меню буде всього 1 пункт з
архітектурою, для 64-бітових - 2 пункти, виберіть потрібний). після завантаження
потрапите в рутову консоль.&lt;/p&gt;
&lt;p&gt;Якщо система не завантажується, а на екрані з'являються якісь написи про
Syslinux - перевірте, чи не підключена до комп'ютера інша флешка. Якщо
так, її потрібно вийняти.&lt;/p&gt;
&lt;p&gt;Якщо у вас є вибір між 32 і 64-бітовим варіантом, вибирати краще
64-бітний, тому ходять чутки про майбутнє припинення підтримки 32-бітних
пакетів.&lt;/p&gt;
&lt;p&gt;Якщо в процесі встановлення вам знадобиться відображення кириличних
символів, командуйте&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setfont UniCyr_8x16
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;в кожному використовуваному терміналі (tty1, tty2, ...).&lt;/p&gt;
&lt;h2 id="net"&gt;Підняття мережі, вихід в інтернет&lt;/h2&gt;
&lt;/p&gt;

&lt;p&gt;Тут я вам не большой помощник, потому что подключение у каждого своё. Не
стоит бояться поднимать интернет из консоли, это не так сложно, как
кажется. Читайте до ~~посинения~~ просветления &lt;a href="https://wiki.archlinux.org/"&gt;wiki.archlinux.org&lt;/a&gt;
или меня: &lt;a href="http://lampslave.ru/pppoe-archlinux/" title="PPPoE в Arch Linux"&gt;PPPoE в Arch Linux&lt;/a&gt;, &lt;a href="http://lampslave.ru/3g-modem-archlinux/" title="3G модем в Arch Linux"&gt;3G модем в Arch Linux&lt;/a&gt;.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Если же у вас упомянутый выше «идеальный вариант» или установка вообще
идёт в VirtualBox, можете вздохнуть с облегчением, потому что в этом
случае сеть поднимается сама и наверняка уже готова к использованию.&lt;/p&gt;
&lt;/p&gt;

&lt;h2 id="hdd"&gt;Подготовка жёсткого диска&lt;/h2&gt;
&lt;/p&gt;

&lt;p&gt;На первый раз очень рекомендую вам поставить Арч на один раздел. Даже
место под swap в общем-то не обязательно выделять, если железо
достаточно мощное. За всё время использования Арча подкачка у меня
работала один или два раза, при том, что у меня всего 2Гб оперативки.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Будем считать добавление swap-раздела «домашней работой». Если решили её
выполнить, не забудьте оставить место на диске и прописать swap в
&lt;kbd&gt;/etc/fstab&lt;/kbd&gt; (к его редактированию мы обратимся, когда будем
настраивать уже установленную систему).&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Разметка&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Процесс разметки описан в отдельной статье «&lt;a href="http://lampslave.ru/use-fdisk-luke/" title="Разметка жёсткого диска с использованием fdisk"&gt;Разметка жёсткого диска с
использованием fdisk&lt;/a&gt;».&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Хочу заметить, что создавать отдельный раздел &lt;kbd&gt;/boot&lt;/kbd&gt;, как
иногда советуют в Wiki, глупо и вредно. Не делайте этого, если не хотите
проблем с загрузкой системы.&lt;/strong&gt;&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Конечно, здесь могут быть исключения, но они касаются только тех, кто
реально отдаёт себе отчёт в том, зачем ему нужен отдельный
&lt;kbd&gt;/boot&lt;/kbd&gt; и может самостоятельно разобраться с соответствующими
настройками.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Форматирование&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Разметить диск мало, надо ещё создать на нём файловую систему. Сам я
использую везде &lt;kbd&gt;ext4&lt;/kbd&gt;, поэтому команду приведу для неё.
Команды для создания других файловых систем и swap-а ищите в Wiki (а
лучше просто напишите в консоли &lt;kbd&gt;mk&lt;/kbd&gt; и пару раз нажмите
&lt;kbd&gt;Tab&lt;/kbd&gt;, по предлагаемым вариантам сами всё поймёте).&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Итак, для форматирования первого (и, в нашем случае, единственного)
раздела пишем:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    mkfs.ext4 -c /dev/sda1&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Параметр &lt;kbd&gt;-c&lt;/kbd&gt; заставить систему проверить раздел на сбойные
сектора. Это особенно актуально, если диск не первой свежести, хотя,
конечно, можно ничего и не проверять.&lt;/p&gt;
&lt;/p&gt;

&lt;h2 id="pacman"&gt;Установка базовых пакетов&lt;/h2&gt;
&lt;/p&gt;

&lt;h3&gt;Монтирование раздела и создание директорий&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;[&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/mkdir-300x166.png" title="Монтирование раздела и создание основных директорий" /&gt;][] Перед тем как ставить пакеты, нам нужно смонтировать в
директорию &lt;kbd&gt;/mnt&lt;/kbd&gt; только что созданный раздел и создать на нём
основные директории.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Монтирование и создание директорий делается при помощи команд:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    mount /dev/sda1 /mntmkdir -p /mnt/{dev,proc,sys,run,tmp,etc}mkdir -p /mnt/var/lib/pacman&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;А проверить результат можно командой:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    ls /mnt&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Выбор зеркала&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;[&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/mirrors-300x166.png" title="Зеркало Яндекса в файле /etc/pacman.d/mirrorlist" /&gt;][] Теперь нам нужно выбрать зеркало, с которого будут
загружаться пакеты. Пишем:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    vi /etc/pacman.d/mirrorlist&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;и оставляем в файле только один адрес. Я пользуюсь зеркалом Яндекса, ну
а вы выбирайте по вкусу.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Если не умеете пользоваться &lt;kbd&gt;vi&lt;/kbd&gt;, ~~то вы сами себе злобные
Буратины~~ можете попробовать &lt;kbd&gt;nano&lt;/kbd&gt;, он намного проще.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Или, что ещё удобнее, можно просто записать нужное зеркало через
&lt;kbd&gt;echo&lt;/kbd&gt;, примерно так:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    echo 'Server = http://mirror.yandex.ru/archlinux/$repo/os/$arch' &amp;gt;&amp;gt; /etc/pacman.d/mirrorlist&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Загрузка пакетов&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Команды для установки пакетов при инсталляции дистрибутива отличаются от
обычных только тем, что пакетному менеджеру дополнительно указывается
корневая директория устанавливаемого дистрибутива. Мы её, если помните,
смонтировали в &lt;kbd&gt;/mnt&lt;/kbd&gt;.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;[&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/pacman1-300x166.png" title="Установка базовых пакетов" /&gt;][] Сначала нам нужно обновить нашу базу данных с информацией о
пакетах:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    pacman -r /mnt -Sy&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;После этого можно загружать и устанавливать любые пакеты.
&lt;strong&gt;Обязательными для установки являются базовые пакеты и загрузчик&lt;/strong&gt;
(os-prober нужен для автоматического обнаружения систем на других
разделах):&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    pacman -r /mnt -S base grub-bios os-prober&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;В принципе, на этом этапе можно установить любые пакеты: хоть файловый
менеджер Midnight Commander, хоть погодный информер для KDE. Однако, я
рекомендую ограничиться минимальным набором пакетов, т.к. не исключено,
что в процессе дальнейшей установки вы что-нибудь сломаете и будете всё
устанавливать заново.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Внимание! При загрузке пакетов убедитесь, что вы устанавливаете всё
необходимое, чтобы иметь возможность поднять интернет из устанавливаемой
системы.&lt;/strong&gt; Особенно это касается тех, кто использует «сложные» методы
подключения (VPN, Wi-Fi, USB-модемы) или скрипты для автоматической
настройки сети, такие как &lt;kbd&gt;pptpsetup&lt;/kbd&gt;.&lt;/p&gt;
&lt;/p&gt;

&lt;h2 id="chroot"&gt;Переключение в устанавливаемую систему&lt;/h2&gt;
&lt;/p&gt;

&lt;p&gt;[&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/chroot-300x166.png" title="Подготовка и переключение в устанавливаемую систему" /&gt;][] После установки пакетов нам предстоит переключиться в
устанавливаемую систему, чтобы сделать некоторые настройки
непосредственно из неё. Но, так как эта система у нас, можно сказать,
«новорожденная», нам придётся сначала прикрутить к ней «органы чувств»
той системы, в который мы сейчас работаем.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Для этого «биндим» (это особый вид монтирования) нужные директории:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    mount --bind /dev /mnt/devmount --bind /proc /mnt/procmount --bind /sys /mnt/sys&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;После этого можно переключаться:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    chroot /mnt bash&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Внимание! Дальнейшие действия производятся в устанавливаемой системе!
Выходить из chroot нужно будет только после завершения всех настроек —
для перезагрузки!&lt;/strong&gt;&lt;/p&gt;
&lt;/p&gt;

&lt;h2 id="settings"&gt;Настройка&lt;/h2&gt;
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Внимание! Если какого-либо конфигурационного файла нет, и не написано,
что он генерируется определённой командой, его надо создать.&lt;/strong&gt; Делать
это при помощи &lt;kbd&gt;touch&lt;/kbd&gt; не обязательно, достаточно просто
запустить текстовый редактор, указав путь и имя файла, а потом
отредактировать и сохранить.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Настройка /etc/rc.conf&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Никакого /etc/rc.conf в системе теперь быть не должно!&lt;/strong&gt; Я не зря
оставил этот пункт, потому что начитавшись других мануалов вы можете
впасть в заблуждение и начать его искать.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Настройка имени хоста&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Открываем &lt;kbd&gt;/etc/hostname&lt;/kbd&gt;, пишем туда имя хоста, например
&lt;kbd&gt;myhost&lt;/kbd&gt; или &lt;kbd&gt;arch&lt;/kbd&gt;.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Настройка локали&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Открываем файл &lt;kbd&gt;/etc/locale.gen&lt;/kbd&gt; и стираем решетку перед
локалью &lt;kbd&gt;ru_RU.UTF-8 UTF-8&lt;/kbd&gt;.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Запускаем генератор локалей:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    locale-gen&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Теперь открываем файл &lt;kbd&gt;/etc/locale.conf&lt;/kbd&gt; и пишем туда
следующее:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    LANG=ru_RU.UTF-8LC_MESSAGES=ru_RU.UTF-8LC_COLLATE=C&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Не пугайтесь, если введя после этого команду &lt;kbd&gt;locale&lt;/kbd&gt; вы не
увидите изменений. Так и должно быть.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Настройки виртуальной консоли&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Открываем файл &lt;kbd&gt;/etc/vconsole.conf&lt;/kbd&gt; и пишем туда:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    KEYMAP=usFONT=UniCyr_8x16&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;В принципе, параметр &lt;kbd&gt;KEYMAP&lt;/kbd&gt; для английской раскладки можно не
задавать, а вот наличие указанного шрифта в
&lt;kbd&gt;/usr/share/kbd/consolefonts&lt;/kbd&gt; лучше проверить.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Настройка времени&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Генерируем файл &lt;kbd&gt;/etc/adjtime&lt;/kbd&gt;:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    hwclock -w --localtime&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;&lt;kbd&gt;localtime&lt;/kbd&gt; указывается для совместимости с Windows, про
использование UTC читайте в Wiki.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Указываем свой часовой пояс:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    ln -sf /usr/share/zoneinfo/Europe/Moscow /etc/localtime&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Если у вас другой часовой пояс — ищите свой файл в
&lt;kbd&gt;/usr/share/zoneinfo/&lt;/kbd&gt; и командуйте аналогичным образом.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Настройка автомонтирования&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Теперь нам необходимо открыть файл &lt;kbd&gt;/etc/fstab&lt;/kbd&gt; и прописать
туда наш корневой раздел, иначе система не сможет загрузиться. Указать
на нужный раздел можно несколькими способами (подробности в Wiki), я
выбрал самый простой — по имени девайса:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    /dev/sda1 / ext4 defaults 0 1&lt;/p&gt;
&lt;/p&gt;

&lt;h3 id="initramfs"&gt;Генерация initramfs&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Теперь переходим к настоящему (но очень простому) шаманству. Пишем
команды:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    export LANG=ru_RU.UTF-8mkinitcpio -p linux&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Не буду грузить вас подробностями про &lt;a href="http://ru.wikipedia.org/wiki/Initrd"&gt;initrd&lt;/a&gt; (потому что я их и сам
не знаю), скажу только, что без выполнения приведённой выше команды ваша
новая система загружаться не сможет, так что следите за опечатками.&lt;/p&gt;
&lt;/p&gt;

&lt;h2 id="bootloader"&gt;Установка загрузчика&lt;/h2&gt;
&lt;/p&gt;

&lt;p&gt;Тут всё предельно просто. Ставим загрузчик:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    grub-install /dev/sda&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;и запускаем автоматическую настройку:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    grub-mkconfig -o /boot/grub/grub.cfg&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Если вы не сделали чего-нибудь эдакого — всё заработает самостоятельно и
без ошибок.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;В мартовской сборке 2013 года, по всей видимости, есть какой-то косяк с
lvm, поэтому в случае возникновения ошибок при выполнении
&lt;kbd&gt;grub-mkconfig&lt;/kbd&gt; нужно удалить пакет &lt;kbd&gt;lvm2&lt;/kbd&gt; и выполнить
команду автонастройки повторно.&lt;/p&gt;
&lt;/p&gt;

&lt;h2 id="settings-after-boot"&gt;Перезагрузка и завершение настройки&lt;/h2&gt;
&lt;/p&gt;

&lt;p&gt;После этого нужно ещё раз проверить правильность всех настроек, выйти из
устанавливаемой системы и перезагрузиться:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    exitreboot&lt;/p&gt;
&lt;/p&gt;

&lt;h2 id="new-system"&gt;Жизнь в новой системе&lt;/h2&gt;
&lt;/p&gt;

&lt;p&gt;Если установленная система смогла загрузиться, значит всё в порядке —
базовая система у нас теперь есть.  &lt;/p&gt;
&lt;p&gt;Теперь можно заняться конфигурацией системы и установкой дополнительных
пакетов: иксов, драйверов, всяческих «кед», «гномов» и прочего.
Проделать это вам предстоит самостоятельно, приведу лишь несколько
полезных ссылок и указаний.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Снова поднимаем сеть&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Для начала нужно будет проверить, как себя чувствует наша сеть:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    ip addr&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Если в выдаче вы увидите только lo-интерфейс, придётся немного
покрасноглазить. С некоторых пор systemd взял именование сетевых
интерфейсов в свои руки, и, по своей любимой привычке, сделал всё «не
как у людей». Почему так, написано здесь:
&lt;a href="http://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames"&gt;http://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames&lt;/a&gt;.
Наша задача — выяснить, как же теперь называется наш старый добрый eth0.
Для этого ищем интерфейс вида &lt;kbd&gt;enp4s1&lt;/kbd&gt; в выдаче&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    ip link&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;После счастливого обретения имени интерфейса запускаем на нём dhcp:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    systemctl start dhcpcd@enp4s1.service&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;и добавляем всё это в автозагрузку:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    systemctl enable dhcpcd@enp4s1.service&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Выключаем проверку ключей&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Начиная с 4 версии pacman по умолчанию проверяет подписи для всех
пакетов. Обработка подписей требует настойки, подробности здесь:
&lt;a href="https://wiki.archlinux.org/index.php/Pacman-key"&gt;https://wiki.archlinux.org/index.php/Pacman-key&lt;/a&gt;. Особое внимание
следует уделить созданию достаточного количества энтропии для генерации
ключей:
&lt;a href="https://wiki.archlinux.org/index.php/Pacman-key#Initializing_the_keyring"&gt;https://wiki.archlinux.org/index.php/Pacman-key#Initializing_the_keyring&lt;/a&gt;.&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;При активном использовании AUR проверка ключей особого смысла не имеет
(и вообще мне лень с ними возиться &lt;img alt=":roll:" src="http://lampslave.ru/wp-includes/images/smilies/icon_rolleyes.gif" /&gt; ), поэтому я предпочитаю
её отключать. Делается это следующим образом: в файле
&lt;kbd&gt;/etc/pacman.conf&lt;/kbd&gt; для каждого репозитория нужно поставить:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;
    SigLevel = Never&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;Теперь нужно раскомментировать зеркало в
&lt;kbd&gt;/etc/pacman.d/mirrorlist&lt;/kbd&gt; и радоваться жизни.&lt;/p&gt;
&lt;/p&gt;

&lt;h3&gt;Создаём пользователя&lt;/h3&gt;
&lt;/p&gt;

&lt;p&gt;Удобный скрипт &lt;kbd&gt;adduser&lt;/kbd&gt; в базовой системе не нашелся (его
почему-то дропнули в AUR), поэтому используем Ъ-метод:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;useradd -m -g users -s /bin/bash имя_пользователяpasswd имя_пользователя
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;На этом пока всё. Оставляйте заявки на дополнение статьи нужной вам
информацией, но сразу скажу, что переписывать Wiki не собираюсь (хотя по
факту именно это и происходит &lt;img alt=":(" src="http://lampslave.ru/wp-includes/images/smilies/icon_sad.gif" /&gt; ).&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/boot-menu-300x225.png" title="Загрузочное меню Arch Linux" /&gt;]: http://lampslave.ru/wp-content/uploads/2012/07/boot-menu.png
  [&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/mkdir-300x166.png" title="Монтирование раздела и создание основных директорий" /&gt;]: http://lampslave.ru/wp-content/uploads/2012/07/mkdir.png
  [&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/mirrors-300x166.png" title="Зеркало Яндекса в файле /etc/pacman.d/mirrorlist" /&gt;]: http://lampslave.ru/wp-content/uploads/2012/07/mirrors.png
  [&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/pacman1-300x166.png" title="Установка базовых пакетов" /&gt;]: http://lampslave.ru/wp-content/uploads/2012/07/pacman1.png
  [&lt;img alt="" src="http://lampslave.ru/wp-content/uploads/2012/07/chroot-300x166.png" title="Подготовка и переключение в устанавливаемую систему" /&gt;]: http://lampslave.ru/wp-content/uploads/2012/07/chroot.png&lt;/p&gt;</summary><category term="arch"></category><category term="linux"></category></entry></feed>